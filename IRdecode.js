const threshold = 40;

const a = [
  163,163,20,61,20,61,20,61,20,61,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,61,20,61,20,61,20,61,20,61,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,20,20,20,20,20,20,20,20,61,20,279,163,163,20,61,20,61,20,61,20,61,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,61,20,61,20,61,20,61,20,61,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,61,20,61,20,20,20,20,20,20,20,20,20,61,20,3700
];

const n = ((a.length) / 2);

function decode (start) {
  let j = 0;
  let x = 0;
  const code = [];
  for (let i = start + 3; i < start + n; i += 2) {
    if (j === 8) {
      code.push(x);
      x = 0;
      j = 0;
    }
    const b = a[i] > threshold ? 1 : 0
    x = (x << 1) | b;
    j++;
  }
  code.push(code.slice(0, 8).reduce((a, b) => a ^ b));
  const s = code.map(i => i.toString(16)).map(i => i.length < 2 ? `0${i}` : i).join(' ');
  console.log(s);  
}

decode(0);
decode(n);

